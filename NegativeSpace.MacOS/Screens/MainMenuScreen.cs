using System;
using Microsoft.Xna.Framework;

namespace NegativeSpace
{
	public class MainMenuScreen : MenuScreen
	{
		public MainMenuScreen () : base ("Main Menu")
		{
			MenuEntry playGameMenuEntry = new MenuEntry ("Play Game");
			MenuEntry optionsMenuEntry = new MenuEntry ("Options");
			MenuEntry exitMenuEntry = new MenuEntry ("Exit");

			playGameMenuEntry.Selected += PlayGameMenuEntrySelected;
			optionsMenuEntry.Selected += OptionsMenuEntrySelected;
			exitMenuEntry.Selected += OnCancel;

			MenuEntries.Add (playGameMenuEntry);
			MenuEntries.Add (optionsMenuEntry);
			MenuEntries.Add (exitMenuEntry);
		}

		void PlayGameMenuEntrySelected (object sender, PlayerIndexEventArgs e)
		{
			LoadingScreen.Load(ScreenManager, true, e.PlayerIndex, new GameplayScreen());
		}

		void OptionsMenuEntrySelected (object sender, PlayerIndexEventArgs e)
		{
			ScreenManager.AddScreen(new OptionsMenuScreen(), e.PlayerIndex);
		}

		protected override void OnCancel (PlayerIndex playerIndex)
		{
			const string message = "Are you sure you want to exit?";

			MessageBoxScreen confirmExitMessageBox = new MessageBoxScreen(message);
			
			confirmExitMessageBox.Accepted += ConfirmExitMessageBoxAccepted;
			
			ScreenManager.AddScreen(confirmExitMessageBox, playerIndex);
		}

		void ConfirmExitMessageBoxAccepted(object sender, PlayerIndexEventArgs e)
		{
			ScreenManager.Game.Exit();
		}
	}
}

